# Netlify build configuration

[build]
  # Base directory (where the site is located)
  base = "store-onepager"

  # Build command - use npm ci for reliable installs, --include=dev ensures devDependencies are installed
  command = "npm ci --include=dev && npm run build"

  # Output directory (relative to base)
  publish = "dist"

[build.environment]
  # Pin Node.js to stable LTS version that satisfies rolldown-vite (^20.19.0 || >=22.12.0)
  NODE_VERSION = "20.19.0"
  NPM_VERSION = "10.8.2"
  # Ensure devDependencies are installed (belt and suspenders approach)
  NPM_FLAGS = "--include=dev"

# Redirects for SPA (if needed)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

